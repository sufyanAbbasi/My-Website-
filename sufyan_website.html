<!doctype html>
<html lang="en">
<style type="text/css">

	body {
		background-color: #202020;
		font-size: 43px;
	}

	.module{
		position: relative;
		height: calc(95vh);
		width: calc(95vh);
		transform: translateX(-50%);
	  	margin-top: 10px;
	  	left: 50%;
	}

	#circle-container {

		position: absolute;
		height: 95%;
		margin: auto;
	  	transform: translateY(-50%) translateX(-50%);
	  	top: 50%; 
	  	left: 50%;
	}

	.circle {
		position: relative;
		height: 100%;
		border-radius: 50%; 
	}

	#outer{
		background-color: rgba(0,255,156,.8); 
		border: solid 30px rgba(255,255,255,.95);
	}

	#inner{
		background-color: #202020;
	}

	p {
		color: white;
		position: absolute;
		transform: translateY(-50%) translateX(-50%);
	  	top: 35%; 
	  	left: 50%;
	  	font-size: 2em;
	}


</style>

<head>

	<title>Sufyan's Website</title>
	
</head>

<body onload="init()">

<div class = "module">
	<div id="circle-container">
		<div class="circle" id="outer">
			
			<div id="circle-container">
				<div class="circle" id="inner"></div>
			</div>
			<p> Welcome! </p>
		</div>
	</div>
</div>



<div class = "module"></div>

<div class = "module"></div>
		



	</div>

</div>

<script type="text/javascript">
	
	function init() {

		$('body').css('font-size', 43 * $(window).height()/725);

		var circleWidth = $('#circle-container').height(); 

		$('.circle').css('width', circleWidth); 

		$(window).on('resize', function(){

			circleWidth = $('#circle-container').height(); 
			$('.circle').css('width', circleWidth); 

			$('body').css('font-size', 43 * $(this).height()/725);

		});

		var degree = 0; 
		var prevScroll = 0; 
		var clockwise = true; 
		var inbound = true; 
		$(window).scroll(function(){
			var currentScroll = $(window).scrollTop(); 
			var moduleHeight = $('.module').height(); 
			var moduleMargin = parseInt($('.module').css('margin-top')) + 10; 
			if (currentScroll>=prevScroll && currentScroll<moduleHeight + moduleMargin){
				inbound = true; 
				degree += 1;
				prevScroll = currentScroll; 
				clockwise = true; 
			}else if(currentScroll<=prevScroll && currentScroll<moduleHeight + moduleMargin){
				inbound = true; 
				degree -= 1; 
				prevScroll = currentScroll;
				clockwise = false; 
			}else {inbound = false;};
		});



		function loop(){
			if (inbound){
				if(clockwise){
					degree += .4; 
				}else {
					degree -= .4; 
				};
				var jitter = Math.random() - Math.random(); 
				$('#inner').css("transform", "perspective(3000px) rotateZ(" + degree + "deg)"); 
				$('p').css("transform", "translateX(-50%) translateY("+ (-50 + jitter) +"%)");
			}
		
			requestAnimationFrame(loop);
		}

		requestAnimationFrame(loop);
}

</script>

<script type="text/javascript" src="jquery-1.11.1.min.js"></script>

<script type="text/javascript" src="raf.js"></script>

</body>

</html>
